<!DOCTYPE html>
<html>
  <head>
    <title>Chess</title>
    <link rel="stylesheet" href="css/chessboard-1.0.0.min.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="js/chessboard-1.0.0.js"></script>
    <script src="http://www.willangles.com/projects/chessboard/js/chess.js"></script>

  </head>
  <body>
    <div id="board" style="width: 400px"></div>
    <script>
    	const game = new Chess()
    	var board = null
    	function onDragStart(source, piece, position, orientation) {
    		if (game.game_over()) {
    			return false
    		}
    		if ((game.turn() === 'w' && piece.search(/^b/) !== -1) ||
      			(game.turn() === 'b' && piece.search(/^w/) !== -1)) {
    				return false
  			}
    	}
    	function onDrop (source, target) {
 		
  			var move = game.move({
  			  from: source,
  			  to: target,
  			  promotion: 'q' 
  			})

  			
  			if (move === null) return 'snapback'


		}
		function onSnapEnd () {
 			board.position(game.fen())
		}

        var config = {
  			draggable: true,
  			position: 'start',
  			onDragStart: onDragStart,
  			onDrop: onDrop,
  			onSnapEnd: onSnapEnd
		}
		board = Chessboard('board', config)
    </script>
  </body>
</html>
